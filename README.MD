# ğŸŒ Terra Plana Chat

> Sistema de chat inteligente com IA especializada em teoria da Terra Plana, desenvolvido com FastAPI e React.

[![Deploy Status](https://img.shields.io/badge/Backend-Railway-green)](https://terra-plana-production.up.railway.app/)
[![Deploy Status](https://img.shields.io/badge/Frontend-Vercel-blue)](https://terra-plana-frontend.vercel.app/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

## ğŸ“– Sobre o Projeto

O **Terra Plana Chat** Ã© uma aplicaÃ§Ã£o web que simula conversas com Eduardo Mayer, um professor especialista em teoria da Terra Plana. A IA foi treinada para manter conversas convincentes e educativas sobre este tema, mantendo um tom acadÃªmico e cientÃ­fico.

### âœ¨ Funcionalidades

- ğŸ’¬ **Chat em tempo real** com IA especializada
- ğŸ¤ **Mensagens de Ã¡udio** (transcriÃ§Ã£o e sÃ­ntese de voz)
- ğŸ“Š **HistÃ³rico persistente** de conversas
- ğŸ”„ **Scroll inteligente** estilo WhatsApp
- ğŸ“± **Interface moderna** e responsiva
- ğŸ”’ **SessÃµes isoladas** por usuÃ¡rio

## ğŸš€ Demo

- **Frontend:** [https://terra-plana-frontend.vercel.app/](https://terra-plana-frontend.vercel.app/)
- **API:** [https://terra-plana-production.up.railway.app/](https://terra-plana-production.up.railway.app/)
- **DocumentaÃ§Ã£o:** [https://terra-plana-production.up.railway.app/docs](https://terra-plana-production.up.railway.app/docs)

## ğŸ› ï¸ Tecnologias

### Backend
- **FastAPI** - Framework web moderno para APIs
- **OpenAI GPT-4** - InteligÃªncia artificial
- **ElevenLabs** - SÃ­ntese de voz (opcional)
- **Supabase** - Banco de dados PostgreSQL
- **Railway** - Deploy em produÃ§Ã£o

### Frontend
- **React 18** - Biblioteca de interface
- **Axios** - Cliente HTTP
- **CSS Modules** - EstilizaÃ§Ã£o moderna
- **Vercel** - Deploy em produÃ§Ã£o

## ğŸ“ Estrutura do Projeto

```
oktasales-test/
â”œâ”€â”€ ğŸ“ app/                    # Backend API
â”‚   â”œâ”€â”€ ğŸ“„ main.py            # AplicaÃ§Ã£o FastAPI
â”‚   â”œâ”€â”€ ğŸ“„ config.py          # ConfiguraÃ§Ãµes
â”‚   â”œâ”€â”€ ğŸ“ models/            # Modelos de dados
â”‚   â”œâ”€â”€ ğŸ“ routers/           # Endpoints da API
â”‚   â””â”€â”€ ğŸ“ services/          # LÃ³gica de negÃ³cio
â”œâ”€â”€ ğŸ“ frontend/              # Frontend React
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ App.js         # Componente principal
â”‚   â”‚   â””â”€â”€ ğŸ“„ index.js       # Entrada da aplicaÃ§Ã£o
â”‚   â””â”€â”€ ğŸ“„ package.json       # DependÃªncias Node.js
â”œâ”€â”€ ğŸ“„ requirements.txt       # DependÃªncias Python
â”œâ”€â”€ ğŸ“„ Dockerfile             # Container para produÃ§Ã£o
â””â”€â”€ ğŸ“„ README.md              # Este arquivo
```

## ğŸš€ Como Executar

### PrÃ©-requisitos

- Python 3.11+
- Node.js 18+
- Chaves de API:
  - [OpenAI API Key](https://platform.openai.com/api-keys)
  - [Supabase URL + Key](https://supabase.com)
  - [ElevenLabs API Key](https://elevenlabs.io) (opcional)

### 1. Configurar Ambiente

```bash
# Clone o repositÃ³rio
git clone https://github.com/seu-usuario/terra-plana.git
cd terra-plana

# Crie o arquivo .env
cp .env.example .env
```

Edite o `.env` com suas chaves:
```env
OPENAI_API_KEY=sk-proj-sua-chave-aqui
SUPABASE_URL=https://seu-projeto.supabase.co
SUPABASE_ANON_KEY=sua-chave-aqui
ELEVENLABS_API_KEY=sua-chave-aqui
```

### 2. Backend (API)

```bash
# Criar ambiente virtual
python -m venv venv

# Ativar ambiente (Windows)
venv\Scripts\activate

# Ativar ambiente (Linux/Mac)
source venv/bin/activate

# Instalar dependÃªncias
pip install -r requirements.txt

# Executar API
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

API disponÃ­vel em: http://localhost:8000

### 3. Frontend (React)

```bash
# Navegar para frontend
cd frontend

# Instalar dependÃªncias
npm install

# Executar aplicaÃ§Ã£o
npm start
```

Frontend disponÃ­vel em: http://localhost:3000

## ğŸ³ Executar com Docker

```bash
# Construir e executar
docker-compose up --build

# Executar em background
docker-compose up -d
```

## ğŸ“š API Endpoints

### Base URL: `https://terra-plana-production.up.railway.app`

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `GET` | `/health` | Status da API |
| `POST` | `/chat/` | Enviar mensagem |
| `GET` | `/chat/history` | Obter histÃ³rico |
| `DELETE` | `/chat/history` | Limpar histÃ³rico |
| `POST` | `/chat/audio` | Enviar Ã¡udio |

### Exemplos de Uso

#### Enviar Mensagem
```bash
curl -X POST "https://terra-plana-production.up.railway.app/chat/" \
  -H "Content-Type: application/json" \
  -H "X-Session-ID: minha-sessao" \
  -d '{"message": "OlÃ¡! Como vocÃª pode provar que a Terra Ã© plana?"}'
```

#### Obter HistÃ³rico
```bash
curl -X GET "https://terra-plana-production.up.railway.app/chat/history" \
  -H "X-Session-ID: minha-sessao"
```

## ğŸŒ Deploy em ProduÃ§Ã£o

### Backend (Railway)

1. Conecte seu repositÃ³rio ao [Railway](https://railway.app)
2. Configure as variÃ¡veis de ambiente:
   ```
   OPENAI_API_KEY=sua-chave
   SUPABASE_URL=sua-url
   SUPABASE_ANON_KEY=sua-chave
   ```
3. Deploy automÃ¡tico a cada push

### Frontend (Vercel)

1. Conecte seu repositÃ³rio ao [Vercel](https://vercel.com)
2. Configure:
   - **Root Directory:** `frontend`
   - **Framework:** Create React App
   - **Environment Variable:**
     ```
     REACT_APP_API_URL=https://sua-api.railway.app
     ```
3. Deploy automÃ¡tico a cada push

## ğŸ”§ ConfiguraÃ§Ã£o do Banco (Supabase)

1. Crie um projeto no [Supabase](https://supabase.com)
2. Execute o script SQL em **SQL Editor**:

```sql
-- Criar tabela de mensagens
CREATE TABLE chat_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    session_id TEXT NOT NULL,
    content TEXT NOT NULL,
    role TEXT NOT NULL CHECK (role IN ('user', 'assistant')),
    timestamp TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Criar Ã­ndice para performance
CREATE INDEX idx_chat_messages_session ON chat_messages(session_id, timestamp);
```

## ğŸ¨ Funcionalidades da Interface

### Chat Inteligente
- **Scroll automÃ¡tico** apenas quando necessÃ¡rio
- **BotÃ£o "voltar ao final"** quando navegando histÃ³rico
- **Indicadores visuais** de status e carregamento
- **Layout responsivo** para mobile e desktop

### Controles de Ãudio
- **GravaÃ§Ã£o de Ã¡udio** com indicador visual
- **TranscriÃ§Ã£o automÃ¡tica** com OpenAI Whisper
- **SÃ­ntese de voz** das respostas com ElevenLabs
- **Player integrado** para reproduzir Ã¡udios

## ğŸ“– DocumentaÃ§Ã£o AvanÃ§ada

- **API Docs:** [/docs](https://terra-plana-production.up.railway.app/docs)
- **ReDoc:** [/redoc](https://terra-plana-production.up.railway.app/redoc)

## ğŸ¤ Contribuindo

1. FaÃ§a um fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## ğŸ‘¨â€ğŸ’» Desenvolvido por NicholasDRR

Criado como projeto educacional para demonstrar integraÃ§Ã£o de IA com desenvolvimento web moderno.

---

â­ Se este projeto foi Ãºtil para vocÃª, considere dar uma estrela no repositÃ³rio!
